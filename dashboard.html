<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>OpenHub - Dashboard</title>
    <link rel="stylesheet" href="style.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;800&display=swap" rel="stylesheet">
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore-compat.js"></script>
        <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-storage-compat.js"></script>
    <script>
      const firebaseConfig = {
        apiKey: "AIzaSyAGRkVamjyg5kzN9e7rpeIFx9ZfP1OxxZ4",
        authDomain: "openhub-d6fe7.firebaseapp.com",
        projectId: "openhub-d6fe7",
        storageBucket: "openhub-d6fe7.firebasestorage.app",
        messagingSenderId: "542864747246",
        appId: "1:542864747246:web:dd21353654f6bdffb4a1ff"
      };
      firebase.initializeApp(firebaseConfig);
            // Optional: set Cloudinary unsigned upload config here.
            // Create an unsigned upload preset in Cloudinary (Settings â†’ Upload â†’ Upload presets)
            // and set your cloud name below. This enables uploads without Firebase Storage.
            // Example:
            // window.CLOUDINARY_CLOUD_NAME = "your_cloud_name";
            // window.CLOUDINARY_UPLOAD_PRESET = "openhub_unsigned";
                // Disable Firebase Storage uploads to avoid CORS/billing issues.
                // Images will be embedded as base64, non-images should be shared as links.
                window.DISABLE_STORAGE_UPLOADS = true;
    </script>
</head>
<body class="fullbleed">
    <div class="layout-wrapper">
        <!-- Left Sidebar Navigation -->
        <aside class="sidebar">
            <div class="sidebar-header">
                <div class="sidebar-brand">ğŸ  OpenHub</div>
            </div>
            <nav class="sidebar-nav">
                <a href="home.html" class="nav-item">
                    <span class="nav-icon">ğŸ </span>
                    <span class="nav-text">Home</span>
                </a>
                <a href="dashboard.html" class="nav-item active">
                    <span class="nav-icon">ğŸ“Š</span>
                    <span class="nav-text">Dashboard</span>
                </a>
                <a href="events.html" class="nav-item">
                    <span class="nav-icon">ğŸ“…</span>
                    <span class="nav-text">Events</span>
                </a>
                <a href="clubs.html" class="nav-item">
                    <span class="nav-icon">ğŸ¤</span>
                    <span class="nav-text">Clubs</span>
                </a>
                <a href="resources.html" class="nav-item">
                    <span class="nav-icon">ğŸ“š</span>
                    <span class="nav-text">Resources</span>
                </a>
                <a href="profile.html" class="nav-item">
                    <span class="nav-icon">ğŸ‘¤</span>
                    <span class="nav-text">Profile</span>
                </a>
            </nav>
            <div class="sidebar-footer">
                <button class="logout-btn-sidebar" onclick="logout()">ğŸšª Logout</button>
            </div>
        </aside>

        <!-- Main Content -->
        <div class="main-content">
            <div class="header-top">
                <h2 class="brand-title">Dashboard</h2>
                <div class="header-actions">
                    <a class="profile-avatar" href="profile.html" title="My Profile">
                        <img id="avatarImgDash" alt="Profile" />
                        <span id="avatarInitialDash" style="display:none;">U</span>
                    </a>
                </div>
            </div>

            <div class="user-info" id="userInfo" style="display: none;">
                <p>ğŸ‘¤ Welcome, <span class="user-email" id="userName"></span></p>
                <p id="userEmail" style="font-size: 0.95em; color: #666;"></p>
        </div>

        <div class="post-input-section">
            <textarea id="postText" placeholder="Share your idea, question, or announcement with the community..."></textarea>
            <div class="attachment-row">
                <input type="url" id="attachmentLink" placeholder="Optional: attach a link (docs, decks, repos...)" aria-label="Attachment link" />
                <label class="file-upload">
                    <input type="file" id="attachmentFile" aria-label="Upload file" accept="image/*,.pdf,.doc,.docx,.ppt,.pptx,.txt,.zip" />
                    <span>ğŸ“ Upload a file (max 5 MB)</span>
                </label>
                <div class="attachment-hint">Attachments are shared with the community. Avoid sensitive data. If cloud storage is disabled, image files will be compressed and embedded; other file types should be shared as links.</div>
            </div>
            
            <!-- AI Features Section -->
            <div class="ai-features" style="margin-top: 10px;" id="aiSection">
                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 8px;">
                    <strong>AI Assistant</strong>
                    <span id="aiStatus" style="font-size: 0.9em; color: #d9534f;">Loading...</span>
                </div>
                <div style="display: flex; gap: 10px; margin-bottom: 10px;">
                    <button class="ai-btn" onclick="generateSummary()" style="flex: 1; padding: 10px; font-size: 0.9em;">âœ¨ AI Summary</button>
                    <button class="ai-btn" onclick="getSuggestions()" style="flex: 1; padding: 10px; font-size: 0.9em;">ğŸ’¡ Get Suggestions</button>
                    <button class="ai-btn" onclick="getOutline()" style="flex: 1; padding: 10px; font-size: 0.9em;">ğŸ“ Create Outline</button>
                </div>
                <div id="aiOutput" class="ai-output" style="display: none; margin-bottom: 10px;"></div>
            </div>
            
            <button class="post-btn" onclick="addPost()">ğŸ“¤ Post Idea</button>
        </div>

        <h3 style="color: #667eea; margin-bottom: 20px;">Recent Ideas & Discussions</h3>
        <div id="posts"></div>
        </div>
    </div>

    <script src="app.js"></script>
    <script src="ai-discovery.js"></script>
</body>
</html>
